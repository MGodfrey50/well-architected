---
title: Choose compute and storage
description: Review the design area for compute and storage of the Azure Well-Architected Framework. Learn how to apply these principles to Oracle on Azure IaaS workloads.
author: jessiehaessler
ms.author: jhaessler
ms.topic: conceptual
ms.date: 04/11/2024
ms.custom: template-overview
ms.service: architecture-center
ms.subservice: well-architected
products:
    - item:
categories:
    - item
---

# What is compute and storage?

You can use Azure to migrate Oracle workloads to match on-premises in an infrastructure as a service (Iaas) model. Oracle can often present hurdles to the cloud due to the complexity, size, and high IO demands of the workload. The Oracle database performance is dependent on the following parameters: read/write Disk throughput (MBPs), read/write IOPS, CPU, RAM, and network latency. It's crucial to understand how to choose the right combination of compute and storage on Azure IaaS, and placement of application workloads relative to database services for the migration of Oracle workloads to be successful.

This article describes the right-sizing of both compute and storage for your Oracle workload on Azure IaaS in order to achieve a successful cloud deployment.

## Assess the Oracle workload using AWR Reports

In order to generate right-sizing recommendations for the required Azure infrastructure, you'll need to generate an Automatic Workload Repository (AWR)/ statspack report for each database that you plan to migrate to Azure.

The AWR is a detailed performance analysis report generated by the Oracle database. It provides comprehensive information about database performance, wait events, system resources, and more. The AWR report is included with the Oracle Database Enterprise Edition - Diagnostic Pack option. However, if you are running the Standard Edition or an Enterprise edition without a Diagnostic Pack license, then the Statspack report should be used as an alternative to the AWR report.
The following link provides guidance on how to generate an [AWR report](https://docs.oracle.com/en/database/oracle/oracle-database/23/tgdba/download-awr-report.html#GUID-735F06E5-C97A-41B1-8C23-F2FEFDE0CED0).

Keep in mind that you should always have a look onto the peak-load. If the peak-load occurs on backup timings during the night and Backup RTO/RPO requirements are inline with 4 hours, then repeat the same exercise for an average load.

Note that a peak-load usually is a window of 1 hour. You can determine your peak-load by using the Oracle Enterprise Manager. If you don't have a license for it or don't use it, you can take advantage of the following script that provides you with the [top 5 busiest times](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_awr.sql). On which basis you generate the AWR report as usual. This script is available for [Standard](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_statspack.sql) and Enterprise [Edition Databases](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_awr.sql).


### Recommendations

- Generate comprehensive AWR reports for a database right-sizing exercise.
- Generate the busiest AWR report for peak workload during short periods, such as one hour or 30 minutes.
- Generate a Peak-load AWR report. Additionally an average-load if desired.
- If available, provide any additional AWR reports that might cover important characteristics of the database workload, such as end-of-month or end-of-quarter reporting periods.
- The report should be in HTML format in order to be used by the right-sizing tool.
- If you aren't sure when your peak-load happens, you can take advantage of the following scripts which will provide the top 5 busiest times:
- [AWR](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_awr.sql).
- [statspack](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_statspack.sql).

## Right-size your Oracle Database

It's important to have the ability to analyze the AWR or Statspack reports of your Oracle workloads carefully in order to right-size your Azure infrastructure so that it's capable of meeting the performance requirements.
By right-sizing we're reviewing your workload requirements to match with the right VM SKU under careful consideration of vCPU, memory, throughput, IOPS.
Such analyses are based on expert understanding of all aspects of database performance and requires automated tools in order to consider all the associated variables. Review [OMAT tool and its Prerequisites](https://github.com/Azure/Oracle-Workloads-for-Azure/tree/main/omat).

When you use the OMAT tool, make sure to review the partition of CPU and Cores. This provides you the Hyper-Threaded factor. Per default the tool uses a factor of "2". Make sure to adjust it based on your specific usage. Additionally, we encourage you to always reach out to your local contact person if you seek expert support.


### Recommendations

- Gain access to automated right-sizing tools.  Oracle Migration Assistant Tool [(OMAT)](https://github.com/Azure/Oracle-Workloads-for-Azure/tree/main/omat) helps to understand resource usage on Oracle installations (on premise or in any cloud) and recommends the most suitable virtual machine and storage that can run the same workload on Azure. It works by processing Automatic Workload Repository (AWR) reports collected from the source system. Required data is extracted from AWR files and placed into an Excel workbook.
- OMAT essentially automates steps defined in the AWR sizing document to speed up the process and to relieve the user from complexities of interpreting the AWR report.
- Seek experts with the skills to understand the implications of the recommendations generated by OMAT.

## Choose the right VM for your Workload

The OMAT tool provides the optimal sizing recommendations for Oracle on Azure IaaS. You then have to make a decision on choosing one of the OMAT recommendations to implement your workload on Azure.
Make sure that you chose a Virtual Machine, which is Hyper-Threaded enabled in order to gain license-savings where applicable.


### Recommendations

- The [E-series](/azure/virtual-machines/edv5-edsv5-series)- and [M-series](/azure/virtual-machines/m-series) Virtual Machines are the common choices for your database. The E-series can handle high throughput values, while the M-series should be leveraged when your workload requires high memory. Both are hyper-threaded enabled.
- Each Virtual Machine family comes with a selection of sizes and can be matched to your needs.  Microsoft also offers so called [constrained core sizes](/azure/virtual-machines/constrained-vcpu?tabs=family-E). Constrained core sizes provide the same machine but with fewer cores to optimize Oracle licensing.
- Apply the Azure Pricing tools to compare the cost of the different Azure VM recommendations.
- Aim to take advantage of Azure reservations to reduce the cost of your compute infrastructure.

## Storage considerations for Oracle on Azure IaaS

Choosing the right Azure storage for the database depends on many factors including the database size, IOPS and Throughput. Azure Storage provides a great range of storage options. Azure Premium Managed Disks provide excellent capabilities for Oracle workloads. Some Databases require a more performant storage solution as would be evident from the right-sizing assessment.

Other storage considerations are related to data files archived redo logs and backups. Archiving redo logs is typically an ongoing read/write operation. These need to be looked at based on the solution requirements and availability.

Customers with on-premises systems usually have the following disk layout. The AWR report provides great insight into the throughput and IOPS requirements of your specific workload.
As Oracle workloads are very performance sensitive, it's crucial to know your throughput and IOPS requirements before deployment.

The following provides an example of a data disk storage-layout:

| Disk name  |  Function | Size (GB) |Throughput |  IOPS | Disk recommendation  |
|---|---|---|---|---|---|
|oredo | Online Redologs  | 400  |  150 |  1500 | Wherever available, choose Premium SSD v2, otherwise P20 |
| oarch  | Archive Redologs  | 7000  | 300  |  1250 | Azure Blob Storage configured in Hot Tier |
| odata  | Data Files & Control File   |  18000 | 1000  | 2500 | Wherever available choose Premium SSD v2, otherwise 5*P50 (striped to RAID-0) |

The temp tablespace can consume a lot of throughput and IOPS. If this is a case for your particular workload, it's recommended to choose a Virtual Machine that has an attached ephemeral disk, such as [Ed-v5](/azure/virtual-machines/edv5-edsv5-series) and put the temmp tablespace onto it.
Obviously you can also choose other disk types depending on your requirements.

Note that this is only an example of one customer workload. Make sure to always review the requirements of the size of your workload, the IOPS and throughput accordingly.

If you need to use multiple disks for one or more logical volumes in your disk setup, regardless of the disk technology you choose to implement (Oracle ASM or LVM or other), make sure that you balance the load across disks for maximum performance.

You can make use of Premium SSD v2 managed disks wherever they're available. Check availability in accordance with the region before deployment. Also review [disk configurations](/azure/virtual-machines/workloads/oracle/oracle-design#disk-types-and-configurations).

Further notice: If you use Oracle ASM and Managed Disks the default disk size configured in ASM is decisive. This means if you configured ASM for a maximum size of 4096 GB, ASM can only process this amount. It results in that even if you provision higher disks, ASM wouldn't recognize the space. Plan for it accordingly and rather decide to provision a certain number of 4095 GB disks. For more information, see [ASM configuration](https://docs.oracle.com/en/database/oracle/oracle-database/19/ostmg/create-diskgroups.html#GUID-7FB8914B-0995-4DA0-8F37-15B8EEAEEE4D).


### Recommendations

- Use the recommendations generated by the OMAT tool to guide you through your database storage options.
- Understand the different Azure disk types and how they fit into your workload requirements by studying [Disk Types](/azure/virtual-machines/disks-types).
-Review best practices on disk configuration in [Disk Types and Configurations](/azure/virtual-machines/workloads/oracle/oracle-design#disk-types-and-configurations).
- If you would like to consider Azure Netapp Files as your storage layer then you can find further information about [Azure Netapp Files for Oracle](/azure/architecture/example-scenario/file-storage/oracle-azure-netapp-files).
- In case you are decoupling from an Exadata, you might also want to have a look at [Application Volume Groups](/azure/azure-netapp-files/performance-oracle-multiple-volumes).
- Suitable options for Redolog archives are [Azure Files (hot tier)](/azure/storage/files/understand-performance#choosing-a-performance-tier-based-on-usage-patterns), especially for large volumes, and Azure Premium Managed disks.
- The Backup option should be based on the data volume and your technical and non-technical requirements.
- The following provides an overview of [Backup Strategies for Oracle Workloads](/azure/virtual-machines/workloads/oracle/oracle-database-backup-strategies).
- Plan for your storage layout to avoid performance impact.

## How to size the compute infrastructure needed for (Oracle) Applications

Oracle applications can typically be moved to Azure using VMs with similar capabilities as those used in the on-premise deployment.


### Recommendations

- It's important to have available data points from the web tier and the application tier, including:
    - No. of vCPUs
    - Average usage of vCPU
    - Memory size
    - Average memory usage
    - App storage size
    - App version
    - Operating system
    - Total IOPS
    - Total throughput
    - Backup strategy
- The application tier can be moved to any suitable VM SKU that meets the performance and cost optimization requirements.

For more information on Oracle Applications on Azure, see [Oracle Applications on Azure](/azure/virtual-machines/workloads/oracle deploy-application-oracle-database-azure).

## Next step

> [!div class="nextstepaction"]
> [Business continuity and disaster recovery](optimize-business-continuity-disaster-recovery.md) 
