---
title: Oracle on Azure IaaS design area compute and storage
description: Review the design area for storage and compute of the Azure Well-Architected Framework. See how to apply these principles to Oracle on Azure IaaS workloads.
author: jessiehaessler
ms.author: 
ms.date: 
ms.topic: conceptual
ms.service: waf
ms.subservice: waf-workload-Oracle
---

# Compute and Storage

The following design area aims to familiarize you with right-sizing your Oracle landscape and prepare for capacity planning. Before you will be able to receive an output of a right-sizing on Azure, you will need to generate an AWR report per affected database that you plan to migrate.

## How to I generate a AWR report?
AWR is a detailed performance analysis report generated by Oracle database. It provides comprehensive 
information about database performance, wait event, system resources, and much more.

The AWR report comes with Oracle Database Enterprise Edition, Diagnostic Pack option. If you havent licensed the Diagnostics and Tuning pack you will need to generate a statspack report. It is used for the same purpose

After you verfied the busiest times you need to Log on to the database with admin priviliges.

    If you are not aware when your peak-load happens, you can leverage the following scripts:
    - [AWR](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_awr.sql).
    - [statspack](https://github.com/Azure/Oracle-Workloads-for-Azure/blob/main/az-oracle-sizing/busiest_statspack.sql).
    The scripts will provide you the top 5 busiest times on which basis you will generate the AWR report as usual.

As soon as you are logged in you will be asked on the format and choose 'html' as output format. In process you will need to indicate the snapshot id (peak-load). As soon as you accepted the default values you will need to specify the name. It will then created in your directory accordingly. 

The generated reports are now used to create a right-sizing based on your database behavior. 

## Right-size your Oracle Database

Oracle Databases behave all differently even though you might have gotten assigned the same number of cores and CPUs by Oracle as others. 
The right-size assessment reviews your actual usage. Thereby it is important to review vCPU, memory, throughput and IOPS, but also your database size.

The [OMAT tool](https://github.com/Azure/Oracle-Workloads-for-Azure/tree/main/omat) is a automated tooling providing you the output for a right-sized capacity on Azure. If you need assistance doing so, please reach out to an Oracle SME to support you conducting the exercise. 

Please be prepared to provide your AWR and/or statspack on peak-load that you created in first step. 

## Choose the right VM for your Workload

As you now generated the right-sizing as an Excel sheet to review you will be provided with the optimal sizing on Azure.

The [E-series](https://learn.microsoft.com/en-us/azure/virtual-machines/edv5-edsv5-series)- and [M-series](https://learn.microsoft.com/en-us/azure/virtual-machines/m-series) Virtual Machines are the right to choose from for your database. The E-series can handle very high throughput values, while the M-series should be leveraged when your workload requires high memory. Both are hyper-threaded enabled. 
Each Virtual Machine comes with a different size and can be matched to your needs. Next to the shapes above, Microsoft also offers so called [constrained core sizes](https://learn.microsoft.com/en-us/azure/virtual-machines/constrained-vcpu?tabs=family-E). Constrained core sizes provide the same machine but with less number of cores to optimize Oracle licensing.

## How do I size our my (Oracle) Applications?

On the application tier, please prepare numbers and statistics from the web tier and the application tier. Statistics should include: 
-	no. of vCPUâ€™s, 
-	Average Utilization of vCPU, 
-	Memory Size, 
-	Average memory utilization 
-	App Storage Size
-	App version
-	Operating System
-	Total IOPS
-	Total Throughput
-	Backup Strategy

The application tiers can leverage all other VM Shapes available which are suited best for cost optimization

## Prepare for Database Storage

in order to choose the right option, we will need to review your database size, IOPS and Throughput of the Database. 

### Choosing Managed Disks

Managed Disks should always be chosen on 'Premium' as these are better suited for Oracle workloads.

To review the best suited option for you please visit [Disk Types](https://learn.microsoft.com/en-us/azure/virtual-machines/disks-types).

In order to review best practices on disk configuration please visit[Disk Types and Configurations](https://learn.microsoft.com/en-us/azure/virtual-machines/workloads/oracle/oracle-design#disk-types-and-configurations).

### Choosing Azure Netapp Files

Some Databases require a more performant storage solution. The decision should always be based on your right-size assessment and being reviewed. You can also always consult an Oracle SME to provide advisory if needed. 

You can also find further information about [Azure Netapp Files for Oracle](https://learn.microsoft.com/en-us/azure/architecture/example-scenario/file-storage/oracle-azure-netapp-files).

In case you are decoupling from an Exadata, you might also want to have a look at [Application Volume Groups](https://learn.microsoft.com/en-us/azure/azure-netapp-files/performance-oracle-multiple-volumes)

## Where to put Archive Redologs?

Commonly archive redologs pass an ongoing read/write operation. In case you see high number we recommend using [Azure Files (hot tier)](https://learn.microsoft.com/en-us/azure/storage/files/understand-performance#choosing-a-performance-tier-based-on-usage-patterns)
Some customers also make use of Premium SSDs.

## What Backup Option to Choose

The Backup option should be based on the data volume and your technical and non-technical requirements. 

The following provides an overview of [Backup Strategies for Oracle Workloads](https://learn.microsoft.com/en-us/azure/virtual-machines/workloads/oracle/oracle-database-backup-strategies).

## Next steps
In next phase you should prepare your BCDR architecture. 